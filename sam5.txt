import static org.junit.jupiter.api.Assertions.assertEquals;
import static org.mockito.Mockito.verify;
import static org.mockito.Mockito.when;

import java.math.BigDecimal;
import java.time.LocalDate;
import java.time.LocalDateTime;
import java.util.ArrayList;
import java.util.List;

import org.junit.jupiter.api.BeforeEach;
import org.junit.jupiter.api.Test;
import org.mockito.InjectMocks;
import org.mockito.Mock;
import org.mockito.MockitoAnnotations;

import com.maybank.ilm.core.dao.AccountBalanceAggrRepo;
import com.maybank.ilm.core.dao.AccountBalanceMgmtRepo;
import com.maybank.ilm.core.dao.FinMessageDao;
import com.maybank.ilm.entity.AccountBalanceAggregation;
import com.maybank.ilm.entity.AccountBalanceManagement;
import com.maybank.ilm.entity.FinMT940;

public class MXMsgHandlerAbstractImplTest {

    @InjectMocks
    private MXMsgHandlerAbstractImpl mxMsgHandlerAbstractImpl;

    @Mock
    private AccountBalanceMgmtRepo mgmtRepo;

    @Mock
    private AccountBalanceAggrRepo aggrRepo;

    @Mock
    private FinMessageDao finMsgDao;

    @BeforeEach
    public void setUp() {
        MockitoAnnotations.initMocks(this);
    }

    @Test
    public void testSaveAllEntities() {
        // Arrange
        List<AccountBalanceManagement> balanceManagements = new ArrayList<>();
        AccountBalanceManagement balanceManagement = new AccountBalanceManagement();
        balanceManagements.add(balanceManagement);

        List<AccountBalanceAggregation> aggregations = new ArrayList<>();
        AccountBalanceAggregation aggregation = new AccountBalanceAggregation();
        aggregations.add(aggregation);

        FinMT940 finMT940 = new FinMT940();

        // Act
        mxMsgHandlerAbstractImpl.saveAllEntities(balanceManagements, aggregations, finMT940);

        // Assert
        verify(mgmtRepo).saveAll(balanceManagements);
        verify(aggrRepo).saveAll(aggregations);
        verify(finMsgDao).saveAny(finMT940);
    }
}
