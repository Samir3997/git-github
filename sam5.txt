@startuml
actor User
participant BlotterController
participant BlotterService
participant AccountBalanceAggregation
participant EntityAccountMapDefinition
participant AccountBalanceMgmtRepo

User -> BlotterController: getBalancesByEntity(entitySkey, currencySkey, timezone, indicator, entityAcctMapSkey, selectedDate)
BlotterController -> BlotterService: getBalancesByEntity(...)
BlotterService -> AccountBalanceMgmtRepo: findAccountBalanceByEntityAndDate(...)
AccountBalanceMgmtRepo --> BlotterService: List<AccountBalanceAggregation>
BlotterService -> EntityAccountMapDefinition: getEntityAccountDefinition(...)
EntityAccountMapDefinition --> BlotterService: Account Definition Data
BlotterService --> BlotterController: Aggregated Account Balances
BlotterController --> User: Response with Account Balances
@enduml
