import org.junit.jupiter.api.Test;

import static org.junit.jupiter.api.Assertions.assertEquals;
import static org.junit.jupiter.api.Assertions.assertThrows;

import java.math.BigDecimal;
import java.util.ArrayList;
import java.util.List;

import com.maybank.ilm.entity.MTSequence;
import com.maybank.ilm.entity.MTField;

public class MXMsgHandlerAbstractImplTest {

    @Test
    public void testGetTotalAmountForMT535_ValidData() {
        // Create sample MT sequences
        MTSequence sequence1 = new MTSequence();
        sequence1.setSeqName("B1");
        List<MTField> fields1 = new ArrayList<>();
        fields1.add(new MTField("93B_BALANCE_AMOUNT_AVAI", "100.00", "BigDecimal"));
        sequence1.setMtFields(fields1);

        MTSequence sequence2 = new MTSequence();
        sequence2.setSeqName("B1");
        List<MTField> fields2 = new ArrayList<>();
        fields2.add(new MTField("93B_BALANCE_AMOUNT_AVAI", "200.00", "BigDecimal"));
        sequence2.setMtFields(fields2);

        List<MTSequence> sequences = new ArrayList<>();
        sequences.add(sequence1);
        sequences.add(sequence2);

        // Call the method
        BigDecimal totalAmount = MXMsgHandlerAbstractImpl.getTotalAmountForMT535(sequences);

        // Assert the result
        assertEquals(new BigDecimal("300.00"), totalAmount);
    }

    @Test
    public void testGetTotalAmountForMT535_EmptyData() {
        List<MTSequence> sequences = new ArrayList<>();
        BigDecimal totalAmount = MXMsgHandlerAbstractImpl.getTotalAmountForMT535(sequences);
        assertEquals(BigDecimal.ZERO, totalAmount);
    }

    @Test
    public void testGetTotalAmountForMT535_InvalidData() {
        // Create a sequence with an invalid field value
        MTSequence sequence = new MTSequence();
        sequence.setSeqName("B1");
        List<MTField> fields = new ArrayList<>();
        fields.add(new MTField("93B_BALANCE_AMOUNT_AVAI", "invalid", "String")); // Field value is invalid
        sequence.setMtFields(fields);

        List<MTSequence> sequences = new ArrayList<>();
        sequences.add(sequence);

        // Expect an exception when the field value cannot be converted to BigDecimal
        assertThrows(NumberFormatException.class, () -> MXMsgHandlerAbstractImpl.getTotalAmountForMT535(sequences));
    }
}
