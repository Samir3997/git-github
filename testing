import org.junit.jupiter.api.Test;
import org.mockito.Mockito;
import static org.mockito.Mockito.*;
import com.maybank.ilm.core.service.MXMsgHandlerAbstractImpl;
import com.maybank.ilm.entity.EntityAccountMapDefinition;
import com.maybank.ilm.embeddable.Block4Tag72;

class MXMsgHandlerAbstractImplTest {

    @Test
    void testFindEamDefn_Block4ReceiverBIC_Success( ) {
        // Mock dependencies
        MXMsgHandlerAbstractImpl handler = Mockito.mock(MXMsgHandlerAbstractImpl.class);
        EntityAccountMapDefinition eamDefnByBlock4 = Mockito.mock(EntityAccountMapDefinition.class);
        Mockito.when(handler.getDefnByEntityIDAndAcctType("B12345678", "accountName", "USD")).thenReturn(eamDefnByBlock4);

        // Call the method
        EntityAccountMapDefinition result = handler.findEamDefn("B12345678", null, null, "USD", "accountName");

        // Assert results
        assertEquals(eamDefnByBlock4, result);
        verify(handler, times(1)).getDefnByEntityIDAndAcctType("B12345678", "accountName", "USD");
        verify(handler, never()).findEamDefnByTag72orBlock1LT(any(), any(), any(), any());
    }

    @Test
    void testFindEamDefn_Block4ReceiverBIC_NotFound_Tag72( ) {
        // Mock dependencies
        MXMsgHandlerAbstractImpl handler = Mockito.mock(MXMsgHandlerAbstractImpl.class);
        Mockito.when(handler.getDefnByEntityIDAndAcctType("B12345678", "accountName", "USD")).thenReturn(null);
        Block4Tag72 tag72 = Mockito.mock(Block4Tag72.class);
        EntityAccountMapDefinition eamDefnByTag72 = Mockito.mock(EntityAccountMapDefinition.class);
        Mockito.when(handler.findEamDefnByTag72(tag72, "USD", "accountName")).thenReturn(eamDefnByTag72);

        // Call the method
        EntityAccountMapDefinition result = handler.findEamDefn("B12345678", tag72, null, "USD", "accountName");

        // Assert results
        assertEquals(eamDefnByTag72, result);
        verify(handler, times(1)).getDefnByEntityIDAndAcctType("B12345678", "accountName", "USD");
        verify(handler, times(1)).findEamDefnByTag72(tag72, "USD", "accountName");
        verify(handler, never()).findEamDefnByBlock1LogicalTerminal(any(), any(), any());
    }

    @Test
    void testFindEamDefn_Block4ReceiverBIC_NotFound_Tag72_NotFound_Block1LT( ) {
        // Mock dependencies
        MXMsgHandlerAbstractImpl handler = Mockito.mock(MXMsgHandlerAbstractImpl.class);
        Mockito.when(handler.getDefnByEntityIDAndAcctType("B12345678", "accountName", "USD")).thenReturn(null);
        Block4Tag72 tag72 = Mockito.mock(Block4Tag72.class);
        Mockito.when(handler.findEamDefnByTag72(tag72, "USD", "accountName")).thenReturn(null);
        Mockito.when(handler.findEamDefnByBlock1LogicalTerminal("LT12345", "USD", "accountName")).thenReturn(null);

        // Call the method
        EntityAccountMapDefinition result = handler.findEamDefn("B12345678", tag72, "LT12345", "USD", "accountName");

        // Assert results
        assertNull(result);
        verify(handler, times(1)).getDefnByEntityIDAndAcctType("B12345678", "accountName", "USD");
        verify(handler, times(1)).findEamDefnByTag72(
