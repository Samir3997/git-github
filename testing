http://10.172.120.19:8013/ilm-web/getNostroDetails

{"countrySkey":1,"entitySkey":1,"currencySkey":41,"entityAcctMapSkey":21,"fromDate":"06-11-2024","toDate":"06-11-2024","reportType":"SD"}

{
    "timeSpendsInSeconds": 1,
    "status": "Saved Successfully",
    "serviceName": "NostroApiController",
    "t": [
        {
            "nostroBalanceDTO": [
                {
                    "openingBalance": 10000.00,
                    "runningBalance": 10000.00,
                    "asOfDate": "2024-11-06"
                }
            ],
            "errorMsg": null,
            "nostroTransactionDTO": []
        }
    ]
}



@RestController
public class NostroApiController {

	@PostMapping(value = "/getNostroDetails")
	@ResponseBody
	@CrossOrigin("${cors.urls}")
	public ResponseEntity<CommonResponseEntity<List<NostroApiCommon>>> getNostroDetails(
			@RequestBody NostroRequestDTO nostroRequestDTO) {
		LOGGER.info("NostroApiController {} getNostroDetailsByFilters", nostroRequestDTO.toString());
		List<NostroApiCommon> reportList = apiResponseService.commonApiService(nostroRequestDTO);
		return new ResponseEntity<>(
				new CommonResponseEntity<List<NostroApiCommon>>(1l, success, "NostroApiController", reportList),
				HttpStatus.OK);
	}

}

}


@Service
public class ApiResponseService {
public List<NostroApiCommon> commonApiService(NostroRequestDTO apiDTO) {
		Long eamSkey = apiDTO.getEntityAcctMapSkey();
		List<NostroApiCommon> respDto = null;
		LOGGER.info(eamSkey);
		List<EntityAccountMapDefinition> definitions = accountMappingRepo.findByEntityAcctMapSkey(eamSkey);
		if (!CollectionUtils.isEmpty(definitions)) {
			String nostroAgent = definitions.get(0).getNostroBankName();
			LOGGER.info(nostroAgent);
			NostroApiService apiHandler = apiHandlerFactory.getType(nostroAgent);
			if(apiHandler!= null) {
				respDto = apiHandler.nostroApiService(apiDTO);
			}
		}

		return respDto;
	}


}


public interface EntityAccountMappingRepo extends JpaRepository<EntityAccountMapDefinition, Long> {
public List<EntityAccountMapDefinition> findByEntityAcctMapSkey(Long entityAcctMapSkey);
}


package com.maybank.ilm.dto.Nostro;

import java.util.List;

public class NostroApiCommon {
	private List<NostroTransaction> nostroTransaction;
	private List<NostroBalanceDTO> nostroBalanceDTO;
	private String errorMsg;

	public List<NostroTransaction> getNostroTransactionDTO() {
		return nostroTransaction;
	}

	public void setNostroTransactionDTO(List<NostroTransaction> nostroTransaction) {
		this.nostroTransaction = nostroTransaction;
	}

	public List<NostroBalanceDTO> getNostroBalanceDTO() {
		return nostroBalanceDTO;
	}

	public void setNostroBalanceDTO(List<NostroBalanceDTO> nostroBalanceDTO) {
		this.nostroBalanceDTO = nostroBalanceDTO;
	}

	public String getErrorMsg() {
		return errorMsg;
	}

	public void setErrorMsg(String errorMsg) {
		this.errorMsg = errorMsg;
	}

	@Override
	public String toString() {
		return "NostroApiCommon [nostroTransaction=" + nostroTransaction + ", nostroBalanceDTO=" + nostroBalanceDTO
				+ ", errorMsg=" + errorMsg + "]";
	}
	
	

}





package com.maybank.ilm.dto.Nostro;

import java.time.LocalDate;

import com.fasterxml.jackson.annotation.JsonFormat;
import com.fasterxml.jackson.annotation.JsonIgnoreProperties;
import com.fasterxml.jackson.annotation.JsonInclude;
import com.fasterxml.jackson.annotation.JsonInclude.Include;

@JsonInclude(value = Include.NON_EMPTY)
@JsonIgnoreProperties(ignoreUnknown = true)
public class NostroRequestDTO {

	private Long countrySkey;

	private Long entitySkey;

	private Long currencySkey;

	private Long entityAcctMapSkey;

	private String reportType;

	@JsonFormat(shape = JsonFormat.Shape.STRING, pattern = "dd-MM-yyyy")
	private LocalDate fromDate;

	@JsonFormat(shape = JsonFormat.Shape.STRING, pattern = "dd-MM-yyyy")
	private LocalDate toDate;

	public Long getCountrySkey() {
		return countrySkey;
	}

	public void setCountrySkey(Long countrySkey) {
		this.countrySkey = countrySkey;
	}

	public Long getEntitySkey() {
		return entitySkey;
	}

	public void setEntitySkey(Long entitySkey) {
		this.entitySkey = entitySkey;
	}

	public Long getCurrencySkey() {
		return currencySkey;
	}

	public void setCurrencySkey(Long currencySkey) {
		this.currencySkey = currencySkey;
	}

	public Long getEntityAcctMapSkey() {
		return entityAcctMapSkey;
	}

	public void setEntityAcctMapSkey(Long entityAcctMapSkey) {
		this.entityAcctMapSkey = entityAcctMapSkey;
	}

	public String getReportType() {
		return reportType;
	}

	public void setReportType(String reportType) {
		this.reportType = reportType;
	}

	public LocalDate getFromDate() {
		return fromDate;
	}

	public void setFromDate(LocalDate fromDate) {
		this.fromDate = fromDate;
	}

	public LocalDate getToDate() {
		return toDate;
	}

	public void setToDate(LocalDate toDate) {
		this.toDate = toDate;
	}

	@Override
	public String toString() {
		return "NostroCommonDTO [countrySkey=" + countrySkey + ", entitySkey=" + entitySkey + ", currencySkey="
				+ currencySkey + ", entityAcctMapSkey=" + entityAcctMapSkey + ", reportType=" + reportType
				+ ", fromDate=" + fromDate + ", toDate=" + toDate + "]";
	}

}
