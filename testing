import org.junit.jupiter.api.Test;
import org.junit.jupiter.api.assertThrows;
import org.mockito.Mockito;
import com.maybank.ilm.core.util.ILMException;
import com.maybank.ilm.entity.FinMT940;
import com.maybank.ilm.embeddable.Block4Tag62;

class MXMsgHandlerAbstractImplTest {

    @Test
    void testGetCurrencyByTag62For940And950_FCurrencyNotNull() {
        // Create a FinMT940 object with FCurrency not null
        FinMT940 finMT940 = new FinMT940();
        Block4Tag62 tags62 = new Block4Tag62();
        tags62.setBlock4Tag62FCurrency("USD");
        finMT940.setTags62(tags62);

        MXMsgHandlerAbstractImpl handler = Mockito.mock(MXMsgHandlerAbstractImpl.class);
        Mockito.when(handler.getTags62For940And950(finMT940)).thenReturn(tags62);

        String currencyCode = handler.getCurrencyByTag62For940And950(finMT940);

        assertEquals("USD", currencyCode);
    }

    @Test
    void testGetCurrencyByTag62For940And950_FCurrencyNull_MCurrencyNotNull() {
        // Create a FinMT940 object with FCurrency null and MCurrency not null
        FinMT940 finMT940 = new FinMT940();
        Block4Tag62 tags62 = new Block4Tag62();
        tags62.setBlock4Tag62FCurrency(null);
        tags62.setBlock4Tag62MCurrency("EUR");
        finMT940.setTags62(tags62);

        MXMsgHandlerAbstractImpl handler = Mockito.mock(MXMsgHandlerAbstractImpl.class);
        Mockito.when(handler.getTags62For940And950(finMT940)).thenReturn(tags62);

        String currencyCode = handler.getCurrencyByTag62For940And950(finMT940);

        assertEquals("EUR", currencyCode);
    }

    @Test
    void testGetCurrencyByTag62For940And950_BothCurrenciesNull() {
        // Create a FinMT940 object with both FCurrency and MCurrency null
        FinMT940 finMT940 = new FinMT940();
        Block4Tag62 tags62 = new Block4Tag62();
        tags62.setBlock4Tag62FCurrency(null);
        tags62.setBlock4Tag62MCurrency(null);
        finMT940.setTags62(tags62);

        MXMsgHandlerAbstractImpl handler = Mockito.mock(MXMsgHandlerAbstractImpl.class);
        Mockito.when(handler.getTags62For940And950(finMT940)).thenReturn(tags62);

        assertThrows(ILMException.class, () -> handler.getCurrencyByTag62For940And950(finMT940));
    }
}
